<section class="py-5 portfolio-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="portfolio-title">Mi Portfolio</h2>
            <p class="lead portfolio-subtitle">Una selección de mis trabajos más recientes</p>
        </div>

        <!-- Lista de proyectos con *ngIf y *ngFor -->
        <div *ngIf="projects && projects.length > 0; else noProjects" class="row">
            <div class="col-md-4 mb-4" *ngFor="let project of projects; trackBy: trackProjectId">
                <!-- Componente reutilizable con @Input y @Output -->
                <app-project-card [project]="project" (viewDetails)="onViewDetails($event)">
                </app-project-card>
            </div>
        </div>

        <ng-template #noProjects>
            <div class="alert alert-warning text-center no-projects-alert" role="alert">
                No hay proyectos disponibles en este momento.
                <button class="btn btn-link" (click)="loadProjects()">Reintentar</button>
            </div>
        </ng-template>

        <!-- Modal de detalles del proyecto -->
        <div *ngIf="isModalOpen && selectedProject" class="modal-backdrop" (click)="closeModal()"></div>
        <div *ngIf="isModalOpen && selectedProject" class="modal d-block" tabindex="-1" role="dialog"
            aria-modal="true" aria-labelledby="modalProjectTitle">
            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 id="modalProjectTitle" class="modal-title">
                            <i class="bi bi-folder2-open me-2"></i>
                            {{ selectedProject.name | uppercase }}
                        </h5>
                        <button type="button" class="btn-close" (click)="closeModal()" aria-label="Cerrar"></button>
                    </div>
                    <div class="modal-body">
                        <p>{{ selectedProject.description }}</p>
                        <div class="mb-3">
                            <strong>Tecnologías:</strong>
                            <div class="mt-2">
                                <span class="badge bg-primary me-1 mb-1"
                                    *ngFor="let tech of selectedProject.technologies">
                                    {{ tech }}
                                </span>
                            </div>
                        </div>
                        <div class="d-flex gap-2">
                            <a [href]="selectedProject.demoUrl" target="_blank" rel="noopener noreferrer"
                                class="btn btn-primary btn-sm">
                                <i class="bi bi-box-arrow-up-right me-1"></i> Ver Demo
                            </a>
                            <a [href]="selectedProject.codeUrl" target="_blank" rel="noopener noreferrer"
                                class="btn btn-code-link btn-sm">
                                <i class="bi bi-github me-1"></i> Ver Código
                            </a>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" (click)="closeModal()">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>